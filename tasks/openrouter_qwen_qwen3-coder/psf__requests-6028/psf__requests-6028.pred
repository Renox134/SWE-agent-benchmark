{"model_name_or_path": "openrouter_qwen_qwen3-coder", "instance_id": "psf__requests-6028", "model_patch": "diff --git a/requests/adapters.py b/requests/adapters.py\nindex fe22ff45..ca04ba0f 100644\n--- a/requests/adapters.py\n+++ b/requests/adapters.py\n@@ -178,6 +178,27 @@ class HTTPAdapter(BaseAdapter):\n         \"\"\"\n         if proxy in self.proxy_manager:\n             manager = self.proxy_manager[proxy]\n+            # Ensure proxy headers are up-to-date\n+            proxy_headers = self.proxy_headers(proxy)\n+            # Update proxy headers for HTTP/HTTPS proxies\n+            if hasattr(manager, 'proxy_headers'):\n+                manager.proxy_headers = proxy_headers\n+            # For SOCKS proxies, we might need to recreate the manager if auth changes\n+            elif proxy.lower().startswith('socks'):\n+                cached_username = getattr(manager, 'username', None)\n+                cached_password = getattr(manager, 'password', None)\n+                username, password = get_auth_from_url(proxy)\n+                if cached_username != username or cached_password != password:\n+                    # Recreate the manager with new credentials\n+                    manager = self.proxy_manager[proxy] = SOCKSProxyManager(\n+                        proxy,\n+                        username=username,\n+                        password=password,\n+                        num_pools=self._pool_connections,\n+                        maxsize=self._pool_maxsize,\n+                        block=self._pool_block,\n+                        **proxy_kwargs\n+                    )\n         elif proxy.lower().startswith('socks'):\n             username, password = get_auth_from_url(proxy)\n             manager = self.proxy_manager[proxy] = SOCKSProxyManager(\n"}