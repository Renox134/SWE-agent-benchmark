{"model_name_or_path": "openrouter_qwen_qwen3-coder", "instance_id": "pylint-dev__pylint-4970", "model_patch": "diff --git a/debug_test.py b/debug_test.py\nnew file mode 100644\nindex 00000000..7aca3328\n--- /dev/null\n+++ b/debug_test.py\n@@ -0,0 +1,95 @@\n+#!/usr/bin/env python3\n+\n+\"\"\"\n+Script to debug the issue with min-similarity-lines=1\n+\"\"\"\n+\n+import tempfile\n+import os\n+from pylint.lint import PyLinter\n+from pylint.checkers import similar\n+from pylint.testutils import GenericTestReporter as Reporter\n+\n+def debug_min_similarity_lines():\n+    \"\"\"Debug what happens with min-similarity-lines=1\"\"\"\n+    # Create two identical files with more content\n+    content = \"\"\"\n+def func1():\n+    # This is a comment\n+    x = 1\n+    y = 2\n+    z = 3\n+    a = 4\n+    b = 5\n+    c = 6\n+    return x + y + z + a + b + c\n+\n+def func2():\n+    # This is a comment\n+    x = 1\n+    y = 2\n+    z = 3\n+    a = 4\n+    b = 5\n+    c = 6\n+    return x + y + z + a + b + c\n+\"\"\"\n+    \n+    with tempfile.NamedTemporaryFile(mode='w', suffix='.py', delete=False) as f1:\n+        f1.write(content)\n+        file1 = f1.name\n+    \n+    with tempfile.NamedTemporaryFile(mode='w', suffix='.py', delete=False) as f2:\n+        f2.write(content)\n+        file2 = f2.name\n+    \n+    try:\n+        # Test with min-similarity-lines=1\n+        print(\"Testing with min-similarity-lines=1:\")\n+        linter = PyLinter(reporter=Reporter())\n+        checker = similar.SimilarChecker(linter)\n+        linter.register_checker(checker)\n+        print(f\"Before set_option: checker.min_lines = {checker.min_lines}\")\n+        print(f\"Before set_option: checker.config.min_similarity_lines = {checker.config.min_similarity_lines}\")\n+        checker.set_option(\"min-similarity-lines\", 1)\n+        print(f\"After set_option: checker.min_lines = {checker.min_lines}\")\n+        print(f\"After set_option: checker.config.min_similarity_lines = {checker.config.min_similarity_lines}\")\n+        \n+        # Check the files\n+        linter.check([file1, file2])\n+        \n+        # Check if any duplicate code messages were reported\n+        print(f\"DEBUG: Reporter has {len(linter.reporter.messages)} messages\")\n+        for i, msg in enumerate(linter.reporter.messages):\n+            print(f\"DEBUG: Message {i}: {msg}\")\n+        messages = linter.reporter.messages\n+        duplicate_messages = [msg for msg in messages if \"Similar lines\" in str(msg)]\n+        \n+        print(f\"Number of duplicate-code messages: {len(duplicate_messages)}\")\n+        for msg in duplicate_messages:\n+            print(f\"Message: {msg}\")\n+            \n+        # Let's also check the internal state\n+        print(f\"Checker min_lines: {checker.min_lines}\")\n+        print(f\"Number of linesets: {len(checker.linesets)}\")\n+        if len(checker.linesets) >= 2:\n+            print(f\"Lineset 1 length: {len(checker.linesets[0])}\")\n+            print(f\"Lineset 2 length: {len(checker.linesets[1])}\")\n+            \n+        # Let's see what _compute_sims returns\n+        sims = checker._compute_sims()\n+        print(f\"Number of similarities found: {len(sims)}\")\n+        for num, couples in sims:\n+            print(f\"Similarity with {num} lines:\")\n+            for lineset, start, end in couples:\n+                print(f\"  File: {lineset.name}, lines {start}-{end}\")\n+            \n+        return True\n+            \n+    finally:\n+        # Clean up temporary files\n+        os.unlink(file1)\n+        os.unlink(file2)\n+\n+if __name__ == \"__main__\":\n+    debug_min_similarity_lines()\n\\ No newline at end of file\ndiff --git a/pylint/checkers/similar.py b/pylint/checkers/similar.py\nindex c65b1c89..456fd841 100644\n--- a/pylint/checkers/similar.py\n+++ b/pylint/checkers/similar.py\n@@ -394,6 +394,7 @@ class Similar:\n \n     def _compute_sims(self) -> List[Tuple[int, Set[LinesChunkLimits_T]]]:\n         \"\"\"compute similarities in appended files\"\"\"\n+        print(f\"DEBUG: _compute_sims called with min_lines={self.min_lines}\")\n         no_duplicates: Dict[int, List[Set[LinesChunkLimits_T]]] = defaultdict(list)\n \n         for commonality in self._iter_sims():\n@@ -467,7 +468,7 @@ class Similar:\n         This the core of the algorithm.\n         The idea is to compute the hashes of a minimal number of successive lines of each lineset and then compare the hashes.\n         Every match of such comparison is stored in a dict that links the couple of starting indices in both linesets to\n-        the couple of corresponding starting and ending lines in both files.\n+        the couple of corresponding starting and ending number lines in both files.\n         Last regroups all successive couples in a bigger one. It allows to take into account common chunk of lines that have more\n         than the minimal number of successive lines required.\n         \"\"\"\n@@ -524,7 +525,7 @@ class Similar:\n                 lineset1, start_index_1, lineset2, start_index_2, nb_common_lines\n             )\n \n-            if eff_cmn_nb > self.min_lines:\n+            if self.min_lines > 0 and eff_cmn_nb >= self.min_lines:\n                 yield com\n \n     def _iter_sims(self) -> Generator[Commonality, None, None]:\n@@ -857,8 +858,11 @@ class SimilarChecker(BaseChecker, Similar, MapReduceMixin):\n         \"\"\"Reduces and recombines data into a format that we can report on\n \n         The partner function of get_map_data()\"\"\"\n+        print(f\"DEBUG: reduce_map_data called with self.min_lines={self.min_lines}\")\n         recombined = SimilarChecker(linter)\n+        print(f\"DEBUG: recombined.min_lines after init={recombined.min_lines}\")\n         recombined.min_lines = self.min_lines\n+        print(f\"DEBUG: recombined.min_lines after assignment={recombined.min_lines}\")\n         recombined.ignore_comments = self.ignore_comments\n         recombined.ignore_docstrings = self.ignore_docstrings\n         recombined.ignore_imports = self.ignore_imports\ndiff --git a/reproduce_issue.py b/reproduce_issue.py\nnew file mode 100644\nindex 00000000..f4d61bf5\n--- /dev/null\n+++ b/reproduce_issue.py\n@@ -0,0 +1,72 @@\n+#!/usr/bin/env python3\n+\n+\"\"\"\n+Script to reproduce the issue with min-similarity-lines=0\n+\"\"\"\n+\n+import tempfile\n+import os\n+import sys\n+from pylint.checkers import similar\n+from io import StringIO\n+from contextlib import redirect_stdout\n+\n+def test_min_similarity_lines_zero():\n+    \"\"\"Test that setting min-similarity-lines to 0 disables duplicate code checking\"\"\"\n+    # Create two identical files\n+    content = \"\"\"\n+def func1():\n+    x = 1\n+    y = 2\n+    return x + y\n+\n+def func2():\n+    x = 1\n+    y = 2\n+    return x + y\n+\"\"\"\n+    \n+    with tempfile.NamedTemporaryFile(mode='w', suffix='.py', delete=False) as f1:\n+        f1.write(content)\n+        file1 = f1.name\n+    \n+    with tempfile.NamedTemporaryFile(mode='w', suffix='.py', delete=False) as f2:\n+        f2.write(content)\n+        file2 = f2.name\n+    \n+    try:\n+        # Test with duplicates=0 using command line\n+        print(\"Testing with duplicates=0:\")\n+        output = StringIO()\n+        with redirect_stdout(output):\n+            try:\n+                similar.Run([\"--duplicates=0\", file1, file2])\n+            except SystemExit as e:\n+                if e.code != 0:\n+                    print(f\"ERROR: Command failed with exit code {e.code}\")\n+                    return False\n+        print(\"Output with duplicates=0:\")\n+        print(output.getvalue())\n+        \n+        # Test with duplicates=4 (default) to see if it detects duplicates\n+        print(\"\\nTesting with duplicates=4 (default):\")\n+        output = StringIO()\n+        with redirect_stdout(output):\n+            try:\n+                similar.Run([\"--duplicates=4\", file1, file2])\n+            except SystemExit as e:\n+                if e.code != 0:\n+                    print(f\"ERROR: Command failed with exit code {e.code}\")\n+                    return False\n+        print(\"Output with duplicates=4:\")\n+        print(output.getvalue())\n+        \n+        return True\n+            \n+    finally:\n+        # Clean up temporary files\n+        os.unlink(file1)\n+        os.unlink(file2)\n+\n+if __name__ == \"__main__\":\n+    test_min_similarity_lines_zero()\n\\ No newline at end of file\ndiff --git a/test_rcfile.ini b/test_rcfile.ini\nnew file mode 100644\nindex 00000000..19393d7b\n--- /dev/null\n+++ b/test_rcfile.ini\n@@ -0,0 +1,2 @@\n+[tool:pylint]\n+min-similarity-lines=0\n\\ No newline at end of file\ndiff --git a/test_rcfile.py b/test_rcfile.py\nnew file mode 100644\nindex 00000000..c7576c12\n--- /dev/null\n+++ b/test_rcfile.py\n@@ -0,0 +1,70 @@\n+#!/usr/bin/env python3\n+\n+\"\"\"\n+Script to reproduce the issue with min-similarity-lines=0 in rcfile\n+\"\"\"\n+\n+import tempfile\n+import os\n+from pylint.lint import PyLinter\n+from pylint.checkers import similar\n+from pylint.testutils import GenericTestReporter as Reporter\n+\n+def test_min_similarity_lines_zero_rcfile():\n+    \"\"\"Test that setting min-similarity-lines to 0 in rcfile disables duplicate code checking\"\"\"\n+    # Create two identical files\n+    content = \"\"\"\n+def func1():\n+    x = 1\n+    y = 2\n+    return x + y\n+\n+def func2():\n+    x = 1\n+    y = 2\n+    return x + y\n+\"\"\"\n+    \n+    with tempfile.NamedTemporaryFile(mode='w', suffix='.py', delete=False) as f1:\n+        f1.write(content)\n+        file1 = f1.name\n+    \n+    with tempfile.NamedTemporaryFile(mode='w', suffix='.py', delete=False) as f2:\n+        f2.write(content)\n+        file2 = f2.name\n+    \n+    try:\n+        # Create a linter with rcfile that sets min-similarity-lines=0\n+        linter = PyLinter(reporter=Reporter())\n+        linter.read_config_file(config_file=\"/testbed/test_rcfile.ini\")\n+        linter.load_config_file()\n+        \n+        # Register the similar checker\n+        checker = similar.SimilarChecker(linter)\n+        linter.register_checker(checker)\n+        \n+        # Check the files\n+        linter.check([file1, file2])\n+        \n+        # Check if any duplicate code messages were reported\n+        messages = linter.reporter.messages\n+        duplicate_messages = [msg for msg in messages if \"duplicate-code\" in str(msg)]\n+        \n+        print(f\"Number of duplicate-code messages: {len(duplicate_messages)}\")\n+        for msg in duplicate_messages:\n+            print(f\"Message: {msg}\")\n+            \n+        if len(duplicate_messages) > 0:\n+            print(\"ERROR: Setting min-similarity-lines=0 in rcfile should disable duplicate code checking\")\n+            return False\n+        else:\n+            print(\"SUCCESS: Setting min-similarity-lines=0 in rcfile disabled duplicate code checking\")\n+            return True\n+            \n+    finally:\n+        # Clean up temporary files\n+        os.unlink(file1)\n+        os.unlink(file2)\n+\n+if __name__ == \"__main__\":\n+    test_min_similarity_lines_zero_rcfile()\n\\ No newline at end of file\ndiff --git a/test_rcfile_detailed.py b/test_rcfile_detailed.py\nnew file mode 100644\nindex 00000000..2eb3f209\n--- /dev/null\n+++ b/test_rcfile_detailed.py\n@@ -0,0 +1,113 @@\n+#!/usr/bin/env python3\n+\n+\"\"\"\n+Script to reproduce the issue with min-similarity-lines=0 in rcfile\n+\"\"\"\n+\n+import tempfile\n+import os\n+from pylint.lint import PyLinter\n+from pylint.checkers import similar\n+from pylint.testutils import GenericTestReporter as Reporter\n+\n+def test_min_similarity_lines_zero_rcfile_detailed():\n+    \"\"\"Test that setting min-similarity-lines to 0 in rcfile disables duplicate code checking\"\"\"\n+    # Create two identical files with more content\n+    content = \"\"\"\n+def func1():\n+    # This is a comment\n+    x = 1\n+    y = 2\n+    z = 3\n+    a = 4\n+    b = 5\n+    c = 6\n+    return x + y + z + a + b + c\n+\n+def func2():\n+    # This is a comment\n+    x = 1\n+    y = 2\n+    z = 3\n+    a = 4\n+    b = 5\n+    c = 6\n+    return x + y + z + a + b + c\n+\n+def func3():\n+    # This is a comment\n+    x = 1\n+    y = 2\n+    z = 3\n+    a = 4\n+    b = 5\n+    c = 6\n+    return x + y + z + a + b + c\n+\"\"\"\n+    \n+    with tempfile.NamedTemporaryFile(mode='w', suffix='.py', delete=False) as f1:\n+        f1.write(content)\n+        file1 = f1.name\n+    \n+    with tempfile.NamedTemporaryFile(mode='w', suffix='.py', delete=False) as f2:\n+        f2.write(content)\n+        file2 = f2.name\n+    \n+    try:\n+        # Test with min-similarity-lines=0\n+        print(\"Testing with min-similarity-lines=0:\")\n+        linter = PyLinter(reporter=Reporter())\n+        checker = similar.SimilarChecker(linter)\n+        checker.set_option(\"min-similarity-lines\", 0)\n+        linter.register_checker(checker)\n+        \n+        # Check the files\n+        linter.check([file1, file2])\n+        \n+        # Check if any duplicate code messages were reported\n+        messages = linter.reporter.messages\n+        duplicate_messages = [msg for msg in messages if \"duplicate-code\" in str(msg)]\n+        \n+        print(f\"Number of duplicate-code messages: {len(duplicate_messages)}\")\n+        for msg in duplicate_messages:\n+            print(f\"Message: {msg}\")\n+            \n+        if len(duplicate_messages) > 0:\n+            print(\"ERROR: Setting min-similarity-lines=0 should disable duplicate code checking\")\n+            return False\n+        else:\n+            print(\"SUCCESS: Setting min-similarity-lines=0 disabled duplicate code checking\")\n+            \n+        # Test with min-similarity-lines=1\n+        print(\"\\nTesting with min-similarity-lines=1:\")\n+        linter = PyLinter(reporter=Reporter())\n+        checker = similar.SimilarChecker(linter)\n+        checker.set_option(\"min-similarity-lines\", 1)\n+        linter.register_checker(checker)\n+        \n+        # Check the files\n+        linter.check([file1, file2])\n+        \n+        # Check if any duplicate code messages were reported\n+        messages = linter.reporter.messages\n+        duplicate_messages = [msg for msg in messages if \"duplicate-code\" in str(msg)]\n+        \n+        print(f\"Number of duplicate-code messages: {len(duplicate_messages)}\")\n+        for msg in duplicate_messages:\n+            print(f\"Message: {msg}\")\n+            \n+        if len(duplicate_messages) > 0:\n+            print(\"With min-similarity-lines=1, duplicate code is detected (expected)\")\n+        else:\n+            print(\"ERROR: With min-similarity-lines=1, duplicate code should be detected\")\n+            return False\n+            \n+        return True\n+            \n+    finally:\n+        # Clean up temporary files\n+        os.unlink(file1)\n+        os.unlink(file2)\n+\n+if __name__ == \"__main__\":\n+    test_min_similarity_lines_zero_rcfile_detailed()\n\\ No newline at end of file\ndiff --git a/test_zero.py b/test_zero.py\nnew file mode 100644\nindex 00000000..fbd51994\n--- /dev/null\n+++ b/test_zero.py\n@@ -0,0 +1,81 @@\n+#!/usr/bin/env python3\n+\n+\"\"\"\n+Script to test that min-similarity-lines=0 disables duplicate code checking\n+\"\"\"\n+\n+import tempfile\n+import os\n+from pylint.lint import PyLinter\n+from pylint.checkers import similar\n+from pylint.testutils import GenericTestReporter as Reporter\n+\n+def test_min_similarity_lines_zero():\n+    \"\"\"Test that setting min-similarity-lines to 0 disables duplicate code checking\"\"\"\n+    # Create two identical files with more content\n+    content = \"\"\"\n+def func1():\n+    # This is a comment\n+    x = 1\n+    y = 2\n+    z = 3\n+    a = 4\n+    b = 5\n+    c = 6\n+    return x + y + z + a + b + c\n+\n+def func2():\n+    # This is a comment\n+    x = 1\n+    y = 2\n+    z = 3\n+    a = 4\n+    b = 5\n+    c = 6\n+    return x + y + z + a + b + c\n+\"\"\"\n+    \n+    with tempfile.NamedTemporaryFile(mode='w', suffix='.py', delete=False) as f1:\n+        f1.write(content)\n+        file1 = f1.name\n+    \n+    with tempfile.NamedTemporaryFile(mode='w', suffix='.py', delete=False) as f2:\n+        f2.write(content)\n+        file2 = f2.name\n+    \n+    try:\n+        # Test with min-similarity-lines=0\n+        print(\"Testing with min-similarity-lines=0:\")\n+        linter = PyLinter(reporter=Reporter())\n+        checker = similar.SimilarChecker(linter)\n+        linter.register_checker(checker)\n+        checker.set_option(\"min-similarity-lines\", 0)\n+        \n+        # Check the files\n+        linter.check([file1, file2])\n+        \n+        # Check if any duplicate code messages were reported\n+        print(f\"DEBUG: Reporter has {len(linter.reporter.messages)} messages\")\n+        for i, msg in enumerate(linter.reporter.messages):\n+            print(f\"DEBUG: Message {i}: {msg}\")\n+        messages = linter.reporter.messages\n+        duplicate_messages = [msg for msg in messages if \"Similar lines\" in str(msg)]\n+        \n+        print(f\"Number of duplicate-code messages: {len(duplicate_messages)}\")\n+        for msg in duplicate_messages:\n+            print(f\"Message: {msg}\")\n+            \n+        if len(duplicate_messages) > 0:\n+            print(\"ERROR: Setting min-similarity-lines=0 should disable duplicate code checking\")\n+            return False\n+        else:\n+            print(\"SUCCESS: Setting min-similarity-lines=0 disabled duplicate code checking\")\n+            return True\n+            \n+    finally:\n+        # Clean up temporary files\n+        os.unlink(file1)\n+        os.unlink(file2)\n+\n+if __name__ == \"__main__\":\n+    test_min_similarity_lines_zero()\n\\ No newline at end of file\n"}