{"model_name_or_path": "openrouter_deepseek_deepseek-v3.2", "instance_id": "psf__requests-6028", "model_patch": "diff --git a/test_proxy_auth.py b/test_proxy_auth.py\nnew file mode 100644\nindex 00000000..0858b55d\n--- /dev/null\n+++ b/test_proxy_auth.py\n@@ -0,0 +1,51 @@\n+import requests\n+from requests.auth import HTTPProxyAuth\n+import sys\n+\n+print(f\"Python version: {sys.version}\")\n+print(f\"Requests version: {requests.__version__}\")\n+\n+# Test with a proxy URL that has authentication\n+proxy_url = \"http://user:pass@proxy.example.com:8080\"\n+\n+# Parse the URL using urlparse\n+from urllib.parse import urlparse\n+parsed = urlparse(proxy_url)\n+print(f\"\\nParsed proxy URL:\")\n+print(f\"  Scheme: {parsed.scheme}\")\n+print(f\"  Netloc: {parsed.netloc}\")\n+print(f\"  Username: {parsed.username}\")\n+print(f\"  Password: {parsed.password}\")\n+print(f\"  Hostname: {parsed.hostname}\")\n+print(f\"  Port: {parsed.port}\")\n+\n+# Test get_auth_from_url\n+from requests.utils import get_auth_from_url\n+username, password = get_auth_from_url(proxy_url)\n+print(f\"\\nget_auth_from_url result:\")\n+print(f\"  Username: '{username}'\")\n+print(f\"  Password: '{password}'\")\n+\n+# Test with proxy that has special characters in password\n+proxy_url2 = \"http://user:pass@word@proxy.example.com:8080\"\n+parsed2 = urlparse(proxy_url2)\n+print(f\"\\nParsed proxy URL with @ in password:\")\n+print(f\"  Scheme: {parsed2.scheme}\")\n+print(f\"  Netloc: {parsed2.netloc}\")\n+print(f\"  Username: {parsed2.username}\")\n+print(f\"  Password: {parsed2.password}\")\n+print(f\"  Hostname: {parsed2.hostname}\")\n+print(f\"  Port: {parsed2.port}\")\n+\n+username2, password2 = get_auth_from_url(proxy_url2)\n+print(f\"\\nget_auth_from_url result with @ in password:\")\n+print(f\"  Username: '{username2}'\")\n+print(f\"  Password: '{password2}'\")\n+\n+# Test with urllib3's parse_url\n+from urllib3.util import parse_url\n+parsed3 = parse_url(proxy_url2)\n+print(f\"\\nurllib3 parse_url result with @ in password:\")\n+print(f\"  Username: {parsed3.auth}\")\n+if parsed3.auth:\n+    print(f\"  Auth split: {parsed3.auth.split(':')}\")\n\\ No newline at end of file\ndiff --git a/test_python38_urlparse.py b/test_python38_urlparse.py\nnew file mode 100644\nindex 00000000..c1682586\n--- /dev/null\n+++ b/test_python38_urlparse.py\n@@ -0,0 +1,36 @@\n+import sys\n+from urllib.parse import urlparse\n+\n+# Test different proxy URL formats\n+test_urls = [\n+    \"http://user:pass@proxy.example.com:8080\",\n+    \"http://user:pass%40word@proxy.example.com:8080\",  # URL-encoded @\n+    \"http://user:pass@word@proxy.example.com:8080\",   # Unencoded @ in password\n+    \"http://user:@proxy.example.com:8080\",  # Empty password\n+    \"http://:pass@proxy.example.com:8080\",   # Empty username\n+    \"http://user:pass:w@rd@proxy.example.com:8080\",  # Multiple special chars\n+]\n+\n+print(f\"Python version: {sys.version_info}\")\n+print(f\"Python version string: {sys.version}\\n\")\n+\n+for url in test_urls:\n+    print(f\"Testing URL: {url}\")\n+    parsed = urlparse(url)\n+    print(f\"  Parsed username: {repr(parsed.username)}\")\n+    print(f\"  Parsed password: {repr(parsed.password)}\")\n+    print(f\"  Parsed netloc: {repr(parsed.netloc)}\")\n+    print()\n+\n+# Let's also test what happens with urllib3's parse_url\n+try:\n+    from urllib3.util import parse_url\n+    print(\"\\nTesting with urllib3's parse_url:\")\n+    for url in test_urls:\n+        print(f\"\\nTesting URL: {url}\")\n+        parsed = parse_url(url)\n+        print(f\"  Parsed auth: {repr(parsed.auth)}\")\n+        if parsed.auth:\n+            print(f\"  Auth parts: {parsed.auth.split(':')}\")\n+except ImportError:\n+    print(\"urllib3 not available\")\n\\ No newline at end of file\ndiff --git a/test_urlparse_issue.py b/test_urlparse_issue.py\nnew file mode 100644\nindex 00000000..9ac69300\n--- /dev/null\n+++ b/test_urlparse_issue.py\n@@ -0,0 +1,58 @@\n+import sys\n+from urllib.parse import urlparse, unquote\n+\n+# Test what Python 3.8.12 might have changed\n+# According to Python docs, in 3.8.12: \"urlparse() no longer raises an exception when parsing URLs containing characters that decompose under IDNA2008 to the same character\"\n+# But there might be other changes...\n+\n+# Let's test with various proxy URLs\n+test_cases = [\n+    # (url, expected_username, expected_password)\n+    (\"http://user:pass@proxy.com:8080\", \"user\", \"pass\"),\n+    (\"http://user:pass%40word@proxy.com:8080\", \"user\", \"pass@word\"),  # @ encoded as %40\n+    (\"http://user:pass@word@proxy.com:8080\", \"user\", \"pass@word\"),    # @ not encoded\n+    (\"http://user:pass%3Aword@proxy.com:8080\", \"user\", \"pass:word\"),  # : encoded as %3A\n+    (\"http://user:pass:word@proxy.com:8080\", \"user\", \"pass:word\"),    # : not encoded\n+    (\"http://user:pass%2Fword@proxy.com:8080\", \"user\", \"pass/word\"),  # / encoded as %2F\n+    (\"http://user:pass/word@proxy.com:8080\", \"user\", \"pass/word\"),    # / not encoded\n+]\n+\n+print(f\"Python version: {sys.version}\")\n+print()\n+\n+for url, expected_user, expected_pass in test_cases:\n+    print(f\"Testing: {url}\")\n+    parsed = urlparse(url)\n+    print(f\"  urlparse username: {repr(parsed.username)}\")\n+    print(f\"  urlparse password: {repr(parsed.password)}\")\n+    \n+    # What get_auth_from_url would return\n+    try:\n+        auth = (unquote(parsed.username) if parsed.username else '', \n+                unquote(parsed.password) if parsed.password else '')\n+    except (AttributeError, TypeError):\n+        auth = ('', '')\n+    \n+    print(f\"  get_auth_from_url: {repr(auth)}\")\n+    print(f\"  Expected: ({repr(expected_user)}, {repr(expected_pass)})\")\n+    \n+    if auth[0] != expected_user or auth[1] != expected_pass:\n+        print(f\"  MISMATCH!\")\n+    print()\n+\n+# Now let's test what happens when we construct a Proxy-Authorization header\n+from requests.auth import _basic_auth_str\n+\n+print(\"\\nTesting _basic_auth_str:\")\n+for url, expected_user, expected_pass in test_cases[:3]:\n+    parsed = urlparse(url)\n+    username = unquote(parsed.username) if parsed.username else ''\n+    password = unquote(parsed.password) if parsed.password else ''\n+    \n+    if username:\n+        auth_header = _basic_auth_str(username, password)\n+        print(f\"URL: {url}\")\n+        print(f\"  Username: {repr(username)}\")\n+        print(f\"  Password: {repr(password)}\")\n+        print(f\"  Proxy-Authorization: {auth_header}\")\n+        print()\n\\ No newline at end of file\n"}