{"model_name_or_path": "openrouter_deepseek_deepseek-v3.2", "instance_id": "pylint-dev__pylint-4661", "model_patch": "diff --git a/pylint/config/__init__.py b/pylint/config/__init__.py\nindex 84774d0e..d46d753f 100644\n--- a/pylint/config/__init__.py\n+++ b/pylint/config/__init__.py\n@@ -56,14 +56,25 @@ __all__ = [\n ]\n \n USER_HOME = os.path.expanduser(\"~\")\n+\n+def _get_xdg_data_home():\n+    \"\"\"Get XDG_DATA_HOME according to XDG Base Directory Specification.\"\"\"\n+    xdg_data_home = os.environ.get(\"XDG_DATA_HOME\")\n+    if xdg_data_home:\n+        return xdg_data_home\n+    return os.path.join(USER_HOME, \".local\", \"share\")\n+\n if \"PYLINTHOME\" in os.environ:\n     PYLINT_HOME = os.environ[\"PYLINTHOME\"]\n     if USER_HOME == \"~\":\n         USER_HOME = os.path.dirname(PYLINT_HOME)\n elif USER_HOME == \"~\":\n+    # Fallback for when we can't determine home directory\n     PYLINT_HOME = \".pylint.d\"\n else:\n-    PYLINT_HOME = os.path.join(USER_HOME, \".pylint.d\")\n+    # Use XDG Base Directory Specification\n+    xdg_data_home = _get_xdg_data_home()\n+    PYLINT_HOME = os.path.join(xdg_data_home, \"pylint\")\n \n \n def _get_pdata_path(base_name, recurs):\ndiff --git a/test_current_behavior.py b/test_current_behavior.py\nnew file mode 100644\nindex 00000000..75895ffd\n--- /dev/null\n+++ b/test_current_behavior.py\n@@ -0,0 +1,77 @@\n+#!/usr/bin/env python3\n+\"\"\"Test current pylint behavior and XDG compliance.\"\"\"\n+\n+import os\n+import sys\n+import tempfile\n+import shutil\n+\n+# Add testbed to path\n+sys.path.insert(0, '/testbed')\n+\n+import pylint.config as config\n+\n+def test_current_behavior():\n+    \"\"\"Test current pylint home directory behavior.\"\"\"\n+    print(\"=== Current Behavior ===\")\n+    print(f\"PYLINT_HOME: {config.PYLINT_HOME}\")\n+    print(f\"USER_HOME: {config.USER_HOME}\")\n+    \n+    # Test with PYLINTHOME env var\n+    with tempfile.TemporaryDirectory() as tmpdir:\n+        pylinthome = os.path.join(tmpdir, \"custom_pylint_home\")\n+        os.environ[\"PYLINTHOME\"] = pylinthome\n+        try:\n+            # Reload config to pick up env var\n+            import importlib\n+            importlib.reload(config)\n+            print(f\"\\nWith PYLINTHOME={pylinthome}:\")\n+            print(f\"PYLINT_HOME: {config.PYLINT_HOME}\")\n+        finally:\n+            del os.environ[\"PYLINTHOME\"]\n+            importlib.reload(config)\n+\n+def test_xdg_behavior():\n+    \"\"\"Test what XDG behavior should be.\"\"\"\n+    print(\"\\n=== XDG Base Directory Specification ===\")\n+    \n+    # Get XDG directories\n+    home = os.path.expanduser(\"~\")\n+    xdg_data_home = os.environ.get(\"XDG_DATA_HOME\") or os.path.join(home, \".local\", \"share\")\n+    xdg_cache_home = os.environ.get(\"XDG_CACHE_HOME\") or os.path.join(home, \".cache\")\n+    xdg_config_home = os.environ.get(\"XDG_CONFIG_HOME\") or os.path.join(home, \".config\")\n+    \n+    print(f\"XDG_DATA_HOME: {xdg_data_home}\")\n+    print(f\"XDG_CACHE_HOME: {xdg_cache_home}\")\n+    print(f\"XDG_CONFIG_HOME: {xdg_config_home}\")\n+    \n+    # Where should pylint store data?\n+    pylint_data_dir = os.path.join(xdg_data_home, \"pylint\")\n+    print(f\"\\nPylint data directory (stats files): {pylint_data_dir}\")\n+    \n+    # Test with XDG_DATA_HOME env var\n+    with tempfile.TemporaryDirectory() as tmpdir:\n+        xdg_data_home_test = os.path.join(tmpdir, \"xdg_data_home\")\n+        os.environ[\"XDG_DATA_HOME\"] = xdg_data_home_test\n+        pylint_data_dir_test = os.path.join(xdg_data_home_test, \"pylint\")\n+        print(f\"\\nWith XDG_DATA_HOME={xdg_data_home_test}:\")\n+        print(f\"Pylint data directory: {pylint_data_dir_test}\")\n+        del os.environ[\"XDG_DATA_HOME\"]\n+\n+def test_backward_compatibility():\n+    \"\"\"Test backward compatibility considerations.\"\"\"\n+    print(\"\\n=== Backward Compatibility ===\")\n+    home = os.path.expanduser(\"~\")\n+    old_pylint_dir = os.path.join(home, \".pylint.d\")\n+    print(f\"Old pylint directory: {old_pylint_dir}\")\n+    print(f\"Exists: {os.path.exists(old_pylint_dir)}\")\n+    \n+    # Check if there are any stats files\n+    if os.path.exists(old_pylint_dir):\n+        stats_files = [f for f in os.listdir(old_pylint_dir) if f.endswith(\".stats\")]\n+        print(f\"Stats files in old directory: {len(stats_files)}\")\n+\n+if __name__ == \"__main__\":\n+    test_current_behavior()\n+    test_xdg_behavior()\n+    test_backward_compatibility()\n\\ No newline at end of file\ndiff --git a/test_pylint_home.py b/test_pylint_home.py\nnew file mode 100644\nindex 00000000..fe197ae2\n--- /dev/null\n+++ b/test_pylint_home.py\n@@ -0,0 +1,46 @@\n+#!/usr/bin/env python3\n+\"\"\"Test script to understand current pylint home directory behavior.\"\"\"\n+\n+import os\n+import sys\n+import tempfile\n+import shutil\n+\n+# Add testbed to path\n+sys.path.insert(0, '/testbed')\n+\n+import pylint.config as config\n+\n+print(\"Current PYLINT_HOME:\", config.PYLINT_HOME)\n+print(\"USER_HOME:\", config.USER_HOME)\n+print(\"HOME env:\", os.environ.get('HOME'))\n+print(\"PYLINTHOME env:\", os.environ.get('PYLINTHOME'))\n+\n+# Test XDG environment variables\n+print(\"\\nXDG environment variables:\")\n+print(\"XDG_DATA_HOME:\", os.environ.get('XDG_DATA_HOME'))\n+print(\"XDG_CACHE_HOME:\", os.environ.get('XDG_CACHE_HOME'))\n+print(\"XDG_CONFIG_HOME:\", os.environ.get('XDG_CONFIG_HOME'))\n+\n+# Test creating stats file\n+print(\"\\nTesting stats file creation...\")\n+test_dir = tempfile.mkdtemp()\n+test_file = os.path.join(test_dir, \"test.py\")\n+\n+# Create a test file\n+with open(test_file, \"w\") as f:\n+    f.write(\"print('hello world')\")\n+\n+# Test save_results\n+test_stats = {\"statement\": 10, \"error\": 0}\n+config.save_results(test_stats, \"test.py\")\n+\n+# Check if file was created\n+expected_path = os.path.join(config.PYLINT_HOME, \"test.py1.stats\")\n+print(f\"Expected stats file: {expected_path}\")\n+print(f\"Stats file exists: {os.path.exists(expected_path)}\")\n+\n+# Clean up\n+if os.path.exists(expected_path):\n+    os.remove(expected_path)\n+shutil.rmtree(test_dir)\n\\ No newline at end of file\ndiff --git a/test_xdg_implementation.py b/test_xdg_implementation.py\nnew file mode 100644\nindex 00000000..e94434ce\n--- /dev/null\n+++ b/test_xdg_implementation.py\n@@ -0,0 +1,50 @@\n+#!/usr/bin/env python3\n+\"\"\"Test XDG Base Directory implementation.\"\"\"\n+\n+import os\n+import sys\n+\n+def get_xdg_data_home():\n+    \"\"\"Get XDG_DATA_HOME according to XDG Base Directory Specification.\n+    \n+    Returns:\n+        str: Path to XDG data home directory.\n+    \"\"\"\n+    xdg_data_home = os.environ.get('XDG_DATA_HOME')\n+    if xdg_data_home:\n+        return xdg_data_home\n+    home = os.path.expanduser('~')\n+    return os.path.join(home, '.local', 'share')\n+\n+def get_xdg_cache_home():\n+    \"\"\"Get XDG_CACHE_HOME according to XDG Base Directory Specification.\n+    \n+    Returns:\n+        str: Path to XDG cache home directory.\n+    \"\"\"\n+    xdg_cache_home = os.environ.get('XDG_CACHE_HOME')\n+    if xdg_cache_home:\n+        return xdg_cache_home\n+    home = os.path.expanduser('~')\n+    return os.path.join(home, '.cache')\n+\n+def get_xdg_config_home():\n+    \"\"\"Get XDG_CONFIG_HOME according to XDG Base Directory Specification.\n+    \n+    Returns:\n+        str: Path to XDG config home directory.\n+    \"\"\"\n+    xdg_config_home = os.environ.get('XDG_CONFIG_HOME')\n+    if xdg_config_home:\n+        return xdg_config_home\n+    home = os.path.expanduser('~')\n+    return os.path.join(home, '.config')\n+\n+print(\"XDG Data Home:\", get_xdg_data_home())\n+print(\"XDG Cache Home:\", get_xdg_cache_home())\n+print(\"XDG Config Home:\", get_xdg_config_home())\n+\n+# What should pylint use?\n+print(\"\\nFor pylint data files (stats):\", os.path.join(get_xdg_data_home(), 'pylint'))\n+print(\"For pylint cache files (if any):\", os.path.join(get_xdg_cache_home(), 'pylint'))\n+print(\"For pylint config files:\", os.path.join(get_xdg_config_home(), 'pylint'))\n\\ No newline at end of file\ndiff --git a/test_xdg_implementation_final.py b/test_xdg_implementation_final.py\nnew file mode 100644\nindex 00000000..8056fbaf\n--- /dev/null\n+++ b/test_xdg_implementation_final.py\n@@ -0,0 +1,65 @@\n+#!/usr/bin/env python3\n+\"\"\"Test XDG implementation for pylint.\"\"\"\n+\n+import os\n+import sys\n+import tempfile\n+\n+sys.path.insert(0, '/testbed')\n+\n+# First, let's see what the current implementation does\n+import pylint.config as config\n+\n+print(\"Current implementation:\")\n+print(f\"  PYLINT_HOME: {config.PYLINT_HOME}\")\n+print(f\"  USER_HOME: {config.USER_HOME}\")\n+\n+# Now implement XDG-compliant version\n+def get_xdg_data_home():\n+    \"\"\"Get XDG_DATA_HOME according to XDG Base Directory Specification.\"\"\"\n+    xdg_data_home = os.environ.get('XDG_DATA_HOME')\n+    if xdg_data_home:\n+        return xdg_data_home\n+    home = os.path.expanduser('~')\n+    return os.path.join(home, '.local', 'share')\n+\n+def get_pylint_home():\n+    \"\"\"Get pylint home directory following XDG specification.\"\"\"\n+    # First check PYLINTHOME environment variable (for backward compatibility)\n+    if 'PYLINTHOME' in os.environ:\n+        return os.environ['PYLINTHOME']\n+    \n+    # Otherwise use XDG_DATA_HOME/pylint\n+    xdg_data_home = get_xdg_data_home()\n+    return os.path.join(xdg_data_home, 'pylint')\n+\n+print(\"\\nXDG-compliant implementation:\")\n+print(f\"  XDG_DATA_HOME: {get_xdg_data_home()}\")\n+print(f\"  Pylint home (XDG): {get_pylint_home()}\")\n+\n+# Test with environment variables\n+print(\"\\nTesting with environment variables:\")\n+\n+# Test 1: PYLINTHOME takes precedence\n+with tempfile.TemporaryDirectory() as tmpdir:\n+    pylinthome = os.path.join(tmpdir, \"custom_pylint_home\")\n+    os.environ[\"PYLINTHOME\"] = pylinthome\n+    print(f\"  With PYLINTHOME={pylinthome}: {get_pylint_home()}\")\n+    del os.environ[\"PYLINTHOME\"]\n+\n+# Test 2: XDG_DATA_HOME works\n+with tempfile.TemporaryDirectory() as tmpdir:\n+    xdg_data_home = os.path.join(tmpdir, \"xdg_data_home\")\n+    os.environ[\"XDG_DATA_HOME\"] = xdg_data_home\n+    print(f\"  With XDG_DATA_HOME={xdg_data_home}: {get_pylint_home()}\")\n+    del os.environ[\"XDG_DATA_HOME\"]\n+\n+# Test 3: Both set - PYLINTHOME should win\n+with tempfile.TemporaryDirectory() as tmpdir:\n+    pylinthome = os.path.join(tmpdir, \"custom_pylint_home\")\n+    xdg_data_home = os.path.join(tmpdir, \"xdg_data_home\")\n+    os.environ[\"PYLINTHOME\"] = pylinthome\n+    os.environ[\"XDG_DATA_HOME\"] = xdg_data_home\n+    print(f\"  With both PYLINTHOME and XDG_DATA_HOME: {get_pylint_home()}\")\n+    del os.environ[\"PYLINTHOME\"]\n+    del os.environ[\"XDG_DATA_HOME\"]\n\\ No newline at end of file\n"}