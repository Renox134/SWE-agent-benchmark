{"model_name_or_path": "openrouter_deepseek_deepseek-v3.2", "instance_id": "psf__requests-5414", "model_patch": "diff --git a/debug_flow.py b/debug_flow.py\nnew file mode 100644\nindex 00000000..1b597ccb\n--- /dev/null\n+++ b/debug_flow.py\n@@ -0,0 +1,45 @@\n+import requests\n+from requests.models import PreparedRequest\n+\n+# Create a PreparedRequest and manually call prepare_url\n+req = PreparedRequest()\n+\n+print(\"Testing prepare_url with http://.example.com...\")\n+try:\n+    req.prepare_url(\"http://.example.com\", params=None)\n+    print(f\"prepare_url succeeded, url is: {req.url}\")\n+except Exception as e:\n+    print(f\"Exception in prepare_url: {type(e).__name__}: {e}\")\n+\n+print(\"\\n\\nTesting prepare_url with http://*.example.com...\")\n+try:\n+    req = PreparedRequest()\n+    req.prepare_url(\"http://*.example.com\", params=None)\n+    print(f\"prepare_url succeeded, url is: {req.url}\")\n+except Exception as e:\n+    print(f\"Exception in prepare_url: {type(e).__name__}: {e}\")\n+\n+print(\"\\n\\nTesting prepare_url with http://example.com...\")\n+try:\n+    req = PreparedRequest()\n+    req.prepare_url(\"http://example.com\", params=None)\n+    print(f\"prepare_url succeeded, url is: {req.url}\")\n+except Exception as e:\n+    print(f\"Exception in prepare_url: {type(e).__name__}: {e}\")\n+\n+print(\"\\n\\nTesting IDNA encoding directly...\")\n+from requests.models import PreparedRequest\n+try:\n+    # Test _get_idna_encoded_host directly\n+    host = \".example.com\"\n+    print(f\"Testing _get_idna_encoded_host with host: '{host}'\")\n+    encoded = PreparedRequest._get_idna_encoded_host(host)\n+    print(f\"Encoded host: {encoded}\")\n+except Exception as e:\n+    print(f\"Exception in _get_idna_encoded_host: {type(e).__name__}: {e}\")\n+\n+print(\"\\n\\nTesting if host starts with dot...\")\n+host = \".example.com\"\n+print(f\"host: '{host}'\")\n+print(f\"host.startswith('*'): {host.startswith('*')}\")\n+print(f\"host.startswith('.'): {host.startswith('.')}\")\n\\ No newline at end of file\ndiff --git a/reproduce_issue.py b/reproduce_issue.py\nnew file mode 100644\nindex 00000000..65cc3f7f\n--- /dev/null\n+++ b/reproduce_issue.py\n@@ -0,0 +1,25 @@\n+import requests\n+\n+print(\"Testing http://.example.com...\")\n+try:\n+    response = requests.get(\"http://.example.com\")\n+    print(\"No exception raised\")\n+except Exception as e:\n+    print(f\"Exception type: {type(e).__name__}\")\n+    print(f\"Exception message: {e}\")\n+\n+print(\"\\nTesting http://*.example.com...\")\n+try:\n+    response = requests.get(\"http://*.example.com\")\n+    print(\"No exception raised\")\n+except Exception as e:\n+    print(f\"Exception type: {type(e).__name__}\")\n+    print(f\"Exception message: {e}\")\n+\n+print(\"\\nTesting http://example.com...\")\n+try:\n+    response = requests.get(\"http://example.com\")\n+    print(\"No exception raised\")\n+except Exception as e:\n+    print(f\"Exception type: {type(e).__name__}\")\n+    print(f\"Exception message: {e}\")\n\\ No newline at end of file\ndiff --git a/test_idna.py b/test_idna.py\nnew file mode 100644\nindex 00000000..3d451123\n--- /dev/null\n+++ b/test_idna.py\n@@ -0,0 +1,14 @@\n+import idna\n+\n+print(\"Testing IDNA encoding directly...\")\n+hosts = [\".example.com\", \"example.com\", \"*.example.com\", \"xn--example.com\"]\n+\n+for host in hosts:\n+    print(f\"\\nTesting host: '{host}'\")\n+    try:\n+        encoded = idna.encode(host, uts46=True)\n+        print(f\"  Encoded: {encoded}\")\n+        decoded = encoded.decode('utf-8')\n+        print(f\"  Decoded: {decoded}\")\n+    except Exception as e:\n+        print(f\"  Exception: {type(e).__name__}: {e}\")\n\\ No newline at end of file\ndiff --git a/test_idna_error.py b/test_idna_error.py\nnew file mode 100644\nindex 00000000..467f981c\n--- /dev/null\n+++ b/test_idna_error.py\n@@ -0,0 +1,16 @@\n+import idna\n+\n+print(\"Testing IDNA error types...\")\n+hosts = [\".example.com\", \"*.example.com\"]\n+\n+for host in hosts:\n+    print(f\"\\nTesting host: '{host}'\")\n+    try:\n+        encoded = idna.encode(host, uts46=True)\n+        print(f\"  Encoded: {encoded}\")\n+    except idna.IDNAError as e:\n+        print(f\"  IDNAError: {type(e).__name__}: {e}\")\n+        print(f\"  Is it idna.core.InvalidCodepoint? {isinstance(e, idna.core.InvalidCodepoint)}\")\n+        print(f\"  Is it idna.core.IDNAError? {isinstance(e, idna.core.IDNAError)}\")\n+    except Exception as e:\n+        print(f\"  Other Exception: {type(e).__name__}: {e}\")\n\\ No newline at end of file\ndiff --git a/trace_issue.py b/trace_issue.py\nnew file mode 100644\nindex 00000000..ed9bfd10\n--- /dev/null\n+++ b/trace_issue.py\n@@ -0,0 +1,27 @@\n+import requests\n+import traceback\n+\n+print(\"Testing http://.example.com...\")\n+try:\n+    response = requests.get(\"http://.example.com\")\n+    print(\"No exception raised\")\n+except Exception as e:\n+    print(f\"Exception type: {type(e).__name__}\")\n+    print(f\"Exception message: {e}\")\n+    print(\"\\nFull traceback:\")\n+    traceback.print_exc()\n+\n+print(\"\\n\\nLet's test parse_url directly:\")\n+from urllib3.util import parse_url\n+try:\n+    result = parse_url(\"http://.example.com\")\n+    print(f\"parse_url succeeded: {result}\")\n+except Exception as e:\n+    print(f\"Exception from parse_url: {type(e).__name__}: {e}\")\n+\n+print(\"\\n\\nLet's test with just the host part:\")\n+try:\n+    result = parse_url(\".example.com\")\n+    print(f\"parse_url succeeded: {result}\")\n+except Exception as e:\n+    print(f\"Exception from parse_url: {type(e).__name__}: {e}\")\n\\ No newline at end of file\n"}